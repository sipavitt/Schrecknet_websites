<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Findr Results</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" href="assets/findr-favicon.svg" type="image/svg+xml">
<link rel="stylesheet" href="style.css">
</head>

<body class="results-body">

<header class="results-header">
  <img src="assets/findr-logo.svg" class="logo-small" onclick="location.href='index.html'">
  <div class="search-wrapper small">
    <input id="search" class="search-box" type="text">
    <span class="icon mic"></span>
    <span class="icon scan"></span>
  </div>
</header>

<nav class="nav-tabs">
  <span class="tab active">All</span>
  <span class="tab">News</span>
  <span class="tab">Images</span>
  <span class="tab">Maps</span>
</nav>

<main id="results"></main>

<script>
/* --- Noise phrasing pools --- */
const NOISE_TITLES = [
  s => s.title,
  s => `${s.title} | Official Site`,
  s => `${s.title} â€“ Latest Updates`,
  s => `${s.title}: News & Information`
];

const NOISE_SNIPPETS = [
  s => s.description,
  s => `Coverage, commentary and public information from ${s.title}.`,
  s => `Explore articles and references related to this topic.`,
  s => `Information sourced from public and editorial material.`
];

/* --- Utilities --- */
function pick(arr) {
  return arr[Math.floor(Math.random() * arr.length)];
}

/* --- Render only (search logic assumed already present) --- */
function renderResult({ title, url, snippet, href }) {
  return `
    <article class="result">
      <a class="result-title" href="${href}">${title}</a>
      <div class="result-url">${url}</div>
      <p class="snippet">${snippet}</p>
    </article>
  `;
}

async function runFindr() {
  const params = new URLSearchParams(location.search);
  const query = params.get("q") || "";
  document.getElementById("search").value = query;

  if (!query) return;

  const [pages, pool] = await Promise.all([
    Promise.all(INGAME_SITES.map(fetchSite)),
    loadTopSites()
  ]);

  const inGame = rankInGame(query, pages);
  const realWorld = matchRealWorldSites(query);
  const noise = generateNoise(query, pool);
  const filler = generateFiller(query);

  renderResults(inGame, realWorld, noise, filler);
}

runFindr();

</script>

</body>
</html>

