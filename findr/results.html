<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Findr Results</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="assets/findr-favicon.svg" type="image/svg+xml">
  <link rel="stylesheet" href="style.css">
</head>

<body class="results">

<!-- Header -->
<header class="results-header">
  <img
    src="assets/findr-logo.svg"
    alt="Findr"
    class="results-logo"
    onclick="location.href='index.html'"
  >

  <form class="results-search" action="results.html" method="get">
    <div class="search-shell">
      <input
        type="text"
        name="q"
        id="search"
        class="search-input"
        autocomplete="off"
      >
      <span class="search-icon mic"></span>
      <span class="search-icon scan"></span>
    </div>
  </form>
</header>

<!-- Tabs -->
<nav class="results-tabs">
  <a class="active">All</a>
  <a>News</a>
  <a>Images</a>
  <a>Maps</a>
</nav>

<!-- Results container -->
<main id="results-container"></main>

<!-- Search logic -->
<script>
/*
  IMPORTANT:
  This file assumes your existing logic provides:

  - loadTopSites()
  - fetchSite()
  - rankInGame()
  - matchRealWorldSites()
  - generateNoise()
  - generateFiller()
  - renderResults(inGame, realWorld, noise, filler)

  DO NOT stub or demo-render here.
*/

async function runFindr() {
  const params = new URLSearchParams(location.search);
  const query = params.get("q") || "";
  const searchInput = document.getElementById("search");
  searchInput.value = query;

  if (!query) return;

  const [pages, pool] = await Promise.all([
    Promise.all(INGAME_SITES.map(fetchSite)),
    loadTopSites()
  ]);

  const inGame = rankInGame(query, pages);
  const realWorld = matchRealWorldSites(query);
  const noise = generateNoise(query, pool);
  const filler = generateFiller(query);

  renderResults(inGame, realWorld, noise, filler);
}

runFindr();
</script>

</body>
</html>
